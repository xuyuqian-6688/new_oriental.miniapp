{"version":3,"sources":["uni-app:///main.js","webpack:////Users/cota/Documents/cootaa/neworiental/pages/internationalSchoolRankings/index.vue?b529","webpack:////Users/cota/Documents/cootaa/neworiental/pages/internationalSchoolRankings/index.vue?1265","webpack:////Users/cota/Documents/cootaa/neworiental/pages/internationalSchoolRankings/index.vue?8162","webpack:////Users/cota/Documents/cootaa/neworiental/pages/internationalSchoolRankings/index.vue?1d15","uni-app:///pages/internationalSchoolRankings/index.vue","webpack:////Users/cota/Documents/cootaa/neworiental/pages/internationalSchoolRankings/index.vue?1c4c"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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","file":"pages/internationalSchoolRankings/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/internationalSchoolRankings/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=11664959&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=11664959&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11664959\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/internationalSchoolRankings/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=11664959&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <div>\n        <navigation-bar></navigation-bar>\n        <div\n            class=\"m_container\"\n            :style=\"{ 'padding-top': menuButton.bottom + 10 + 'px' }\"\n        >\n            <div class=\"pb-1 p-lr-1 bg-fff\">\n                <span class=\"title\">国际学校排行</span>\n            </div>\n            <div class=\"flex-row p-lr-1 bg-fff\">\n                <div class=\"flex-1\">\n                    <search-input\n                        @input=\"handleSearchSchool\"\n                        :placeholder=\"placeholder\"\n                    ></search-input>\n                </div>\n            </div>\n            <div\n                class=\"classify-area bg-fff\"\n                :class=\"{ fixed: isFixedTop ? true : false }\"\n                :style=\"{ top: menuButton.bottom + 10 + 'px' }\"\n            >\n                <div class=\"btn-area\">\n                    <div\n                        class=\"conditions\"\n                        @click=\"handleConditionChange('意向国家')\"\n                    >\n                        <span>{{\n                            currCountryObj.name\n                                ? currCountryObj.name\n                                : \"意向国家\"\n                        }}</span>\n                        <span class=\"triangle\"></span>\n                    </div>\n                    <div\n                        class=\"conditions\"\n                        @click=\"handleConditionChange('招生年级')\"\n                    >\n                        <span>{{\n                            currRecruitObj.name\n                                ? currRecruitObj.name\n                                : \"招生年级\"\n                        }}</span>\n                        <span class=\"triangle\"></span>\n                    </div>\n                    <div\n                        class=\"conditions\"\n                        @click=\"handleConditionChange('开设课程')\"\n                    >\n                        <span>{{\n                            currMajorObj.name ? currMajorObj.name : \"开设课程\"\n                        }}</span>\n                        <span class=\"triangle\"></span>\n                    </div>\n                    <div\n                        class=\"conditions\"\n                        @click=\"handleConditionChange('学费')\"\n                    >\n                        <span>{{\n                            currPriceObj.text ? currPriceObj.text : \"学费\"\n                        }}</span>\n                        <span class=\"triangle\"></span>\n                    </div>\n                </div>\n\n                <div class=\"drop-area\" v-show=\"dropAreaShow\">\n                    <div\n                        class=\"drop-content\"\n                        v-show=\"dropAreaStatus === '意向国家'\"\n                    >\n                        <div class=\"tag-btn-box\">\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active': currCountryObj.city_id\n                                        ? false\n                                        : true,\n                                }\"\n                                @click=\"countryBtnChange({})\"\n                            >\n                                全部\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currCountryObj.city_id === item.city_id,\n                                }\"\n                                v-for=\"(item, index) in countryTags\"\n                                :key=\"index\"\n                                @click=\"countryBtnChange(item)\"\n                            >\n                                {{ item.name }}\n                            </div>\n                            <picker\n                                class=\"tag-btn\"\n                                header-text=\"国家选择\"\n                                @change=\"countryPickerChange\"\n                                :value=\"currCountryIndex\"\n                                :range=\"countryData\"\n                                range-key=\"name\"\n                            >\n                                更多国家\n                            </picker>\n                        </div>\n                    </div>\n                    <div\n                        class=\"drop-content\"\n                        v-show=\"dropAreaStatus === '招生年级'\"\n                    >\n                        <div class=\"tag-btn-box\">\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active': currRecruitObj.id\n                                        ? false\n                                        : true,\n                                }\"\n                                @click=\"recruitBtnChange({})\"\n                            >\n                                全部\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currRecruitObj.id === item.id,\n                                }\"\n                                v-for=\"(item, index) in recruitTags\"\n                                :key=\"index\"\n                                @click=\"recruitBtnChange(item)\"\n                            >\n                                {{ item.name }}\n                            </div>\n                        </div>\n                    </div>\n                    <div\n                        class=\"drop-content\"\n                        v-show=\"dropAreaStatus === '开设课程'\"\n                    >\n                        <div class=\"tag-btn-box\">\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active': currMajorObj.id\n                                        ? false\n                                        : true,\n                                }\"\n                                @click=\"majorBtnChange({})\"\n                            >\n                                全部\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currMajorObj.id === item.id,\n                                }\"\n                                v-for=\"(item, index) in majorTags\"\n                                :key=\"index\"\n                                @click=\"majorBtnChange(item)\"\n                            >\n                                {{ item.name }}\n                            </div>\n                        </div>\n                    </div>\n                    <div\n                        class=\"drop-content\"\n                        v-show=\"dropAreaStatus === '学费'\"\n                    >\n                        <div class=\"tag-btn-box\">\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active': currPriceObj.text\n                                        ? false\n                                        : true,\n                                }\"\n                                @click=\"priceBtnChange({})\"\n                            >\n                                全部\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currPriceObj.min_price === 0,\n                                }\"\n                                @click=\"\n                                    priceBtnChange({\n                                        min_price: 0,\n                                        max_price: 100000,\n                                        text: '10万以下',\n                                    })\n                                \"\n                            >\n                                10万以下\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currPriceObj.min_price === 100000,\n                                }\"\n                                @click=\"\n                                    priceBtnChange({\n                                        min_price: 100000,\n                                        max_price: 200000,\n                                        text: '10-20万',\n                                    })\n                                \"\n                            >\n                                10-20万\n                            </div>\n                            <div\n                                class=\"tag-btn\"\n                                :class=\"{\n                                    'tag-btn-active':\n                                        currPriceObj.min_price === 200000,\n                                }\"\n                                @click=\"\n                                    priceBtnChange({\n                                        min_price: 200000,\n                                        max_price: 300000,\n                                        text: '20-30万',\n                                    })\n                                \"\n                            >\n                                20-30万\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"item-list\" v-if=\"schools.length\">\n                <div\n                    class=\"wrapper\"\n                    v-for=\"(item, index) in schools\"\n                    :key=\"index\"\n                >\n                    <button class=\"userinfo-btn\" open-type=\"getUserInfo\" @getuserinfo=\"getUserInfo\" :data-id=\"item.id\"></button>\n                    <school-item :item=\"item\" sort=\"world_sort\"> </school-item>\n                </div>\n            </div>\n            <div v-else style=\"text-align: center\">暂无数据</div>\n        </div>\n    </div>\n</template>\n\n<script>\n// Use Vuex\nimport { mapState } from \"vuex\";\nimport SearchInput from \"../../components/SearchInput\";\nimport SchoolItem from \"../../components/SchoolItem\";\nimport NavigationBar from \"../../components/NavigationBar\";\nimport {\n    login,\n    searchAbroad,\n    getAreaList,\n    hotCity,\n    schoolRelation,\n} from \"@/api/api.js\";\n\nexport default {\n    components: {\n        SearchInput,\n        SchoolItem,\n        NavigationBar,\n    },\n    data() {\n        return {\n            placeholder: \"搜索学校名称\",\n            keyword: \"\",\n            type: \"2\", // 2国际升学榜 其他学校资料库\n            schools: [],\n            page: 1,\n            filterData: {}, // 提交的筛选数据\n            // 筛选\n            dropAreaShow: false,\n            dropAreaStatus: \"\",\n            countryTags: [],\n            countryData: [],\n            majorTags: [],\n            recruitTags: [],\n            currCountryIndex: 0,\n            currCountryObj: {},\n            currMajorObj: {},\n            currPriceObj: {},\n            currRecruitObj: {},\n            // filter 吸顶\n            isFixedTop: false, //是否固定顶部\n        };\n    },\n    computed: {\n        ...mapState([\"menuButton\", \"hasUserInfo\"]),\n    },\n    mounted() {\n        this.handleSearchSchool(this.keyword, 1);\n        // 获取地区列表/专业/专业\n        this.getAreaRelation();\n    },\n    // 下拉刷新\n    onPullDownRefresh() {\n        uni.stopPullDownRefresh(); // 解决无法回弹\n        this.handleSearchSchool(this.keyword, 1);\n    },\n    // 上拉加载，拉到底部触发\n    onReachBottom() {\n        this.handleSearchSchool(this.keyword, this.page + 1);\n    },\n    /**\n     * 监听页面滑动事件\n     */\n    onPageScroll(e) {\n        let scrollTop = parseInt(e.scrollTop); //滚动条距离顶部高度\n\n        //判断'滚动条'滚动的距离 和 '元素在初始时'距顶部的距离进行判断\n        let isSatisfy = scrollTop >= this.menuButton.bottom + 10 ? true : false;\n        //为了防止不停的setData, 这儿做了一个等式判断。 只有处于吸顶的临界值才会不相等\n        if (this.menuButton.bottom + 10 === isSatisfy) {\n            return false;\n        }\n        this.isFixedTop = isSatisfy;\n    },\n    methods: {\n        handleSearchSchool(val, page = 1) {\n            this.keyword = val;\n            uni.showLoading({\n                title: \"加载中\",\n            });\n            searchAbroad({\n                page,\n                type: this.type,\n                keyword: this.keyword,\n                ...this.filterData,\n            })\n                .then((res) => {\n                    uni.hideLoading()\n                    if (page === 1) {\n                        this.schools = res.data.data;\n                    } else {\n                        if (res.data.data.length) {\n                            this.schools = this.schools.concat(res.data.data);\n                            this.page = page;\n                        } else {\n                            uni.showToast({\n                                title: \"没有更多数据了\",\n                                icon: \"none\",\n                                duration: 2000,\n                            });\n                        }\n                    }\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n        },\n        goTo(val, id) {\n            \n        },\n        // 获取筛选条件数据\n        getAreaRelation() {\n            getAreaList()\n                .then((res) => {\n                    this.countryData = res.data.en;\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n            schoolRelation()\n                .then((res) => {\n                    this.majorTags = res.data.major;\n                    this.recruitTags = res.data.recruit_students;\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n            hotCity({\n                type: this.type,\n            })\n                .then((res) => {\n                    if (res.data.length) {\n                        this.countryTags = res.data;\n                    } else {\n                        this.countryTags = this.countryData.filter(\n                            (item) =>\n                                item.name === \"美国\" ||\n                                item.name === \"英国\" ||\n                                item.name === \"法国\" ||\n                                item.name === \"德国\"\n                        );\n                    }\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n        },\n        handleConditionChange(conditions) {\n            if (this.dropAreaStatus === conditions) {\n                this.dropAreaShow = !this.dropAreaShow;\n            } else {\n                this.dropAreaShow = true;\n            }\n            this.dropAreaStatus = conditions;\n        },\n        // tag-btn选择国家\n        countryBtnChange(item) {\n            this.currCountryObj = item;\n            this.currCountryIndex = this.countryData.findIndex(\n                (v) => v.city_id === item.city_id\n            );\n            this.filterData.city_id = item.city_id;\n            this.handleSearchSchool(this.keyword, 1);\n            this.dropAreaShow = false;\n        },\n        // picker国家\n        countryPickerChange(e) {\n            this.currCountryIndex = e.mp.detail.value;\n            this.currCountryObj = this.cityData[e.mp.detail.value];\n            this.filterData.city_id = this.currCountryObj.city_id;\n            this.handleSearchSchool(this.keyword, 1);\n            this.dropAreaShow = false;\n        },\n        // tag-btn选择专业\n        majorBtnChange(item) {\n            this.currMajorObj = item;\n            this.filterData.major = item.id;\n            this.handleSearchSchool(this.keyword, 1);\n            this.dropAreaShow = false;\n        },\n        // tag-btn选择招生年级\n        recruitBtnChange(item) {\n            this.currRecruitObj = item;\n            this.filterData.recruit_students = item.id;\n            this.handleSearchSchool(this.keyword, 1);\n            this.dropAreaShow = false;\n        },\n        // tag-btn选择学费\n        priceBtnChange(item) {\n            this.currPriceObj = item;\n            this.filterData.min_price = item.min_price;\n            this.filterData.max_price = item.max_price;\n            this.handleSearchSchool(this.keyword, 1);\n            this.dropAreaShow = false;\n        },\n        getUserInfo(e) {\n            const that = this\n            uni.login({\n                success (res) {\n                    if (res.code) {\n                        if (e.mp.detail.userInfo) {\n                            // 用户按了允许授权按钮\n                            const userInfo = e.mp.detail.userInfo\n                            if (that.hasUserInfo) {\n                                uni.navigateTo({ url: \"/pages/schoolDetail/main?id=\" + e.currentTarget.dataset.id });\n                            } else {\n                                uni.showLoading({title: '登录中'})\n                                login({\n                                    code: res.code,\n                                    nickname: userInfo.nickName,\n                                    avatar: userInfo.avatarUrl,\n                                    country: userInfo.country,\n                                    province: userInfo.province,\n                                    city: userInfo.city,\n                                    gender: userInfo.gender,\n                                    language: userInfo.language\n                                }).then( res => {\n                                    uni.hideLoading()\n                                    // 保存access_token\n                                    that.$store.state.access_token = res.data.access_token\n                                    uni.setStorageSync('access_token', res.data.access_token)\n                                    that.$store.state.hasUserInfo = true\n                                    uni.setStorageSync('has_user_info', true)\n                                    uni.navigateTo({ url: \"/pages/schoolDetail/main?id=\" + e.currentTarget.dataset.id });\n                                }).catch( err => {\n                                    console.log(err)\n                                })\n                            }\n                        } else {\n                            // 用户按了拒绝按钮\n                            uni.showModal({\n                                title: '提示',\n                                content: '为了更好的用户体验，请同意授权！',\n                                showCancel: false,\n                                confirmText: '返回授权',\n                                success: function(res) {\n                                    if (res.confirm) {\n                                        console.log('用户点击了“返回授权”')\n                                    }\n                                }\n                            })\n                        }\n                    } else {\n                        console.log('登录失败！' + res.errMsg)\n                    }\n                }\n            })\n        }\n    },\n};\n</script>\n\n<style scoped>\n.wrapper {\n    position: relative;\n}\n.userinfo-btn {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: 0;\n    padding: 0;\n    border: none;\n    background-color: transparent;\n}\n\n.m_container {\n    background: #f5f5f5;\n}\n.bg-fff {\n    background: #fff;\n}\n.p-lr-1 {\n    padding-left: 1em;\n    padding-right: 1em;\n}\n.classify-area {\n    width: 100%;\n    border-bottom: 1px solid #dedede;\n    left: 0;\n    z-index: 999;\n}\n.classify-area.fixed {\n    position: fixed;\n}\n.classify-area .btn-area {\n    display: flex;\n    padding: 10px 0;\n}\n.classify-area .conditions {\n    font-size: 14px;\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.classify-area .triangle {\n    width: 0;\n    height: 0;\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-top: 5px solid #000;\n    margin-left: 5px;\n}\n.classify-area .drop-area {\n    padding: 10px 10px 0;\n}\n.classify-area .tag-btn {\n    display: inline-block;\n    padding: 0px 8px;\n    margin-right: 10px;\n    border: 1px solid #333;\n    border-radius: 10px;\n    margin-bottom: 10px;\n    font-size: 14px;\n}\n.tag-btn-active {\n    background-color: #333;\n    color: #fff;\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=11664959&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=11664959&scoped=true&lang=css&\""],"sourceRoot":""}